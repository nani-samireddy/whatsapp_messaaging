{
  "version": 3,
  "sources": ["../../../../../apps/whatsapp_messaging/whatsapp_messaging/public/js/custom_buttons.js"],
  "sourcesContent": ["$(document).on(\"app_ready\", function () {\n\tfrappe.call({\n\t\tmethod:\n\t\t\t\"whatsapp_messaging.controller.get_template_doctypes\",\n\t\tcallback: function (response) {\n\t\t\tif (response.message) {\n\t\t\t\tvar templates_details = response.message;\n\t\t\t\t$.each(Object.keys(templates_details), function (i, doctype) {\n\t\t\t\t\tfrappe.ui.form.on(doctype, \"refresh\", function (frm) {\n\t\t\t\t\t\taddCustomButtons(frm, templates_details[doctype]);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t});\n});\n\nfunction addCustomButtons(frm, templates) {\n\tfor (const template in templates) {\n\t\tfrm.add_custom_button(\n\t\t\ttemplates[template].label,\n\t\t\tfunction () {\n\t\t\t\tsendWhatsAppMessage(frm, templates[template]);\n\t\t\t},\n\t\t\t__(\"WhatsApp Messaging\"),\n\t\t);\n\t}\n}\n\nfunction sendWhatsAppMessage(frm, template) {\n\tfrappe.call({\n\t\tmethod:\n\t\t\t\"whatsapp_messaging.controller.ws_handle_on_custom_trigger\",\n\t\targs: {\n\t\t\ttemplate_name: template.name,\n\t\t\tdoctype: frm.doctype,\n\t\t\tdocname: frm.doc.name,\n\t\t},\n\t\tsuccess: function (response) {\n\t\t\tif (response.message) {\n\t\t\t\t// Show success message\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle: __(\"Success\"),\n\t\t\t\t\tmessage: __(\"Message sent successfully\"),\n\t\t\t\t\tindicator: \"green\",\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\terror: function (response) {\n\t\t\t// Show error message\n\t\t\tfrappe.msgprint({\n\t\t\t\ttitle: __(\"Error\"),\n\t\t\t\tmessage: __(\"Failed to send message\"),\n\t\t\t\tindicator: \"red\",\n\t\t\t});\n\t\t},\n\t\tfreeze: true,\n\t\tfreeze_message: __(\"Sending Message...\"),\n\t});\n}\n\n\n\n"],
  "mappings": ";;AAAA,IAAE,QAAQ,EAAE,GAAG,aAAa,WAAY;AACvC,WAAO,KAAK;AAAA,MACX,QACC;AAAA,MACD,UAAU,SAAU,UAAU;AAC7B,YAAI,SAAS,SAAS;AACrB,cAAI,oBAAoB,SAAS;AACjC,YAAE,KAAK,OAAO,KAAK,iBAAiB,GAAG,SAAU,GAAG,SAAS;AAC5D,mBAAO,GAAG,KAAK,GAAG,SAAS,WAAW,SAAU,KAAK;AACpD,+BAAiB,KAAK,kBAAkB,QAAQ;AAAA,YACjD,CAAC;AAAA,UACF,CAAC;AAAA,QACF;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF,CAAC;AAED,WAAS,iBAAiB,KAAK,WAAW;AACzC,eAAW,YAAY,WAAW;AACjC,UAAI;AAAA,QACH,UAAU,UAAU;AAAA,QACpB,WAAY;AACX,8BAAoB,KAAK,UAAU,SAAS;AAAA,QAC7C;AAAA,QACA,GAAG,oBAAoB;AAAA,MACxB;AAAA,IACD;AAAA,EACD;AAEA,WAAS,oBAAoB,KAAK,UAAU;AAC3C,WAAO,KAAK;AAAA,MACX,QACC;AAAA,MACD,MAAM;AAAA,QACL,eAAe,SAAS;AAAA,QACxB,SAAS,IAAI;AAAA,QACb,SAAS,IAAI,IAAI;AAAA,MAClB;AAAA,MACA,SAAS,SAAU,UAAU;AAC5B,YAAI,SAAS,SAAS;AAErB,iBAAO,SAAS;AAAA,YACf,OAAO,GAAG,SAAS;AAAA,YACnB,SAAS,GAAG,2BAA2B;AAAA,YACvC,WAAW;AAAA,UACZ,CAAC;AAAA,QACF;AAAA,MACD;AAAA,MACA,OAAO,SAAU,UAAU;AAE1B,eAAO,SAAS;AAAA,UACf,OAAO,GAAG,OAAO;AAAA,UACjB,SAAS,GAAG,wBAAwB;AAAA,UACpC,WAAW;AAAA,QACZ,CAAC;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,MACR,gBAAgB,GAAG,oBAAoB;AAAA,IACxC,CAAC;AAAA,EACF;",
  "names": []
}
